<mat-card [class.mat-elevation-z]="editable">
    <mat-card-header *ngIf="!editable">
        <mat-card-title>
            <button mat-button matTooltip="Click on a field to copy it's value to the clipboard."
                matTooltipPosition="after">hints
                <mat-icon>info</mat-icon>
            </button>
        </mat-card-title>
    </mat-card-header>
    <mat-accordion multi="true">
        <mat-expansion-panel [expanded]="editable || (destinations[protocol] && destinations[protocol]?.length > 0)"
            *ngFor='let protocol of protocols()'
            [disabled]="!editable && (!destinations[protocol] || destinations[protocol].length === 0)">
            <mat-expansion-panel-header>
                <mat-panel-title><span *ngIf="editable && destinationsForm.get(protocol).invalid"><mat-icon color="warn">warning</mat-icon>&nbsp; </span>{{protocol}}</mat-panel-title>
                <mat-panel-description>
                    {{destinations[protocol]?.length  || 'No'}}
                    destination{{destinations[protocol]?.length > 1 ? 's' : ''}} configured with {{protocol}}
                </mat-panel-description>
            </mat-expansion-panel-header>

            <app-destination-smtp *ngIf="protocol === 'SMTP'" [editable]="editable"
                [destinations]="destinations[protocol]" (destinationsChanged)="destinationChanged(protocol, $event)">
            </app-destination-smtp>
            <app-destination-ftp *ngIf="protocol === 'FTP'" [editable]="editable"
                [destinations]="destinations[protocol]" (destinationsChanged)="destinationChanged(protocol, $event)">
            </app-destination-ftp>
            <app-destination-sftp *ngIf="protocol === 'SFTP'" [editable]="editable"
                [destinations]="destinations[protocol]" (destinationsChanged)="destinationChanged(protocol, $event)">
            </app-destination-sftp>
            <app-destination-folder *ngIf="protocol === 'FOLDER'" [editable]="editable"
                [destinations]="destinations[protocol]" (destinationsChanged)="destinationChanged(protocol, $event)">
            </app-destination-folder>
        </mat-expansion-panel>
    </mat-accordion>
</mat-card>