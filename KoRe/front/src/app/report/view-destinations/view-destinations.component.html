<mat-card [class.mat-elevation-z]="editable">
    <ng-container *ngIf="editable; then editableDestination; else readDestination"></ng-container>
    <ng-template #readDestination>
        <mat-card-header>
            <mat-card-title>
                <button mat-button matTooltip="Click on a field to copy it's value to the clipboard."
                    matTooltipPosition="after">hints
                    <mat-icon>info</mat-icon>
                </button>
            </mat-card-title>
        </mat-card-header>
        <mat-accordion multi="true">
            <mat-expansion-panel [expanded]="destinations[protocol] && destinations[protocol]?.length > 0"
                *ngFor='let protocol of protocols()'
                [disabled]="!destinations[protocol] || destinations[protocol].length === 0">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{protocol}}
                    </mat-panel-title>
                    <mat-panel-description>
                        {{destinations[protocol]?.length  || 'No'}} destination(s) configured with {{protocol}}
                    </mat-panel-description>
                </mat-expansion-panel-header>

                <ng-container *ngFor="let destination of destinations[protocol]" [ngSwitch]="protocol">

                    <ng-container *ngSwitchCase="'SMTP'">
                        <div class="formContainer">
                            <app-input-copy-click class="formInput fullLengthInput" [value]="destination.email"
                                label="Email address"></app-input-copy-click>
                            <app-input-copy-click class="formInput fullLengthInput" [value]="destination.object"
                                label="Object"></app-input-copy-click>
                        </div>
                    </ng-container>

                    <ng-container *ngSwitchCase="'FTP'">
                        <ng-container *ngTemplateOutlet="SFTPorFTP"></ng-container>
                    </ng-container>

                    <ng-container *ngSwitchCase="'SFTP'">
                        <ng-container *ngTemplateOutlet="SFTPorFTP"></ng-container>
                    </ng-container>

                    <ng-template #SFTPorFTP>
                        <div class="formContainer">

                            <app-input-copy-click class="formInput" [value]="destination.server.name"
                                label="Server name"></app-input-copy-click>
                            <app-input-copy-click class="formInput fullLengthInput" [value]="destination.path"
                                label="Path"></app-input-copy-click>

                            <span>
                                <button class="copyButton"
                                    (click)="copyToClipboardAndNotify(formatUrlToString(destination.server, destination.path), 'Url')"
                                    mat-stroked-button color="primary">url to clipboard</button>
                            </span>
                        </div>
                    </ng-template>

                    <ng-container *ngSwitchCase="'FOLDER'">
                        <div class="formContainer">
                            <app-input-copy-click class="formInput fullLengthInput" [value]="destination.path"
                                label="Path"></app-input-copy-click>
                        </div>
                    </ng-container>
                </ng-container>

            </mat-expansion-panel>
        </mat-accordion>
    </ng-template>
    <ng-template #editableDestination>
        plop
    </ng-template>
</mat-card>